name: ci

# SSH Keys must be generated in PEM format
# ssh-keygen -m PEM
ssh-keys:
  public: ~/.ssh/id_rsa_libcloud.pub
  private: ~/.ssh/id_rsa_libcloud

providers:
  aws:
    region: us-east-2

layouts:
  cluster: 
    runs-on: ami-0d90bed76900e679a
    steps:
      - script: contrib/setup-deb-system
      - script: contrib/setup-docker
      - script: contrib/setup-cluster
    providers: [aws]
  elastic-agent-ubuntu:
    runs-on: ubuntu-focal
    steps:
      - run: "sudo apt update"
      - run: "sudo apt-get -qyf dist-upgrade"
    providers: [aws]
  elastic-agent-centos:
    runs-on: ami-057cacbfbbb471bb3
    steps:
      - script: contrib/setup-rpm-system
    providers: [google]
  elastic-agent-sles:
    runs-on: sles-15
    steps:
      - script: contrib/setup-rpm-system
    providers: [google]
  elastic-agent-win:
    runs-on: windows-2022
    steps:
      - script: contrib/setup-powershell-system
    providers: [google]
